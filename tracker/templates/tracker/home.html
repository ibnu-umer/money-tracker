{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Money Tracker</title>
    <link rel="stylesheet" href="{% static 'tracker/style.css' %}">
</head>
<body>

    <h1>Money Tracker</h1>

    <!-- Accounts block -->
    <div class="box-header">
        <h2>Accounts</h2>
        <button class="add-btn">+ Add Account</button>
    </div>
    
    <!-- Horizontal Scrollable Block -->
    <div class="account-scroll">
        <div class="account-block">üíµ<br>Cash<br>‚Çπ5000</div>
        <div class="account-block">üè¶<br>Bank<br>‚Çπ15000</div>
        <div class="account-block">üí∞<br>Savings<br>‚Çπ10000</div>
    </div>

    <!-- Income and Expense Tables -->
    <div class="income-expense">
        <div class="box">
            <div class="box-header">
                <h2>Income</h2>
                <button class="add-btn">+Add Income</button>
            </div>
            
            <table class="income-table">
                <tr><th>Category</th><th>Amount</th></tr>
                <tr><td>Salary</td><td>‚Çπ30,000</td></tr>
                <tr><td>Freelance</td><td>‚Çπ5,000</td></tr>
            </table>
        </div>

        <div class="box">
            <div class="box-header">
                <h2>Expense</h2>
                <button class="add-btn">+Add expense</button>
            </div>

            <table class="expense-table">
                <tr><th>Category</th><th>Amount</th></tr>
                <tr><td>Food</td><td>‚Çπ2,000</td></tr>
                <tr><td>Rent</td><td>‚Çπ8,000</td></tr>
            </table>
        </div>
    </div>



    <!-- Records and Graph -->
    <div class="bottom-section">
        <div class="records">
            <h2>Daily Transactions</h2>

            {% for tx in transactions %}
            <div class="record-item">
                <span class="record-icon">{{ tx.icon }}</span>
                <div class="record-info">
                    <div class="record-top">
                        <div class="category">{{ tx.category }}</div>
                        <div class="amount {% if tx.type == 'income' %}income{% else %}expense{% endif %}">
                            {% if tx.type == 'expense' %}-{% endif %}‚Çπ{{ tx.amount }}
                        </div>
                    </div>
                    <div class="note">{{ tx.note }}</div>
                </div>
            </div>
            {% endfor %}
        </div>

            <div class="graph">
                <h2>Statistics</h2>
                <div class="chart-layout">
                    <!-- Wide container for both bar and line charts -->
                    <div class="chart-item wide">
                        <h3>Monthly Summary</h3>
                        <canvas id="barChart"></canvas>
                        <h3 style="margin-top: 1rem;">Income vs Expense Trend</h3>
                        <canvas id="trendLineChart"></canvas>
                    </div>

                    <!-- Expense Breakdown -->
                    <div class="chart-item small">
                        <h3>Expense Breakdown</h3>
                        <canvas id="pieChart"></canvas>
                    </div>

                    <!-- Cumulative Balance -->
                    <div class="chart-item small">
                        <h3>Cumulative Balance</h3>
                        <canvas id="lineChart"></canvas>
                    </div>
                </div>
            </div>

    </div>

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
    const barCtx = document.getElementById('barChart').getContext('2d');
    new Chart(barCtx, {
        type: 'bar',
        data: {
            labels: ['Jan', 'Feb', 'Mar', 'Apr'],
            datasets: [{
                label: 'Income',
                data: [30000, 28000, 32000, 35000],
                backgroundColor: 'green'
            }, {
                label: 'Expense',
                data: [15000, 16000, 14000, 17000],
                backgroundColor: 'red'
            }]
        }
    });

    const trendCtx = document.getElementById('trendLineChart').getContext('2d');
    new Chart(trendCtx, {
        type: 'line',
        data: {
            labels: ['Jan', 'Feb', 'Mar', 'Apr'],
            datasets: [
                {
                    label: 'Income',
                    data: [30000, 28000, 32000, 35000],
                    borderColor: 'green',
                    fill: false,
                    tension: 0.3
                },
                {
                    label: 'Expense',
                    data: [15000, 16000, 14000, 17000],
                    borderColor: 'red',
                    fill: false,
                    tension: 0.3
                }
            ]
        },
        options: {
            responsive: true,
            plugins: {
                legend: { display: true }
            }
        }
    });
    new Chart(document.getElementById('pieChart'), {
        type: 'pie',
        data: {
            labels: ['Food', 'Rent', 'Travel', 'Others'],
            datasets: [{
                label: 'Expenses',
                data: [2000, 8000, 1500, 1000],
                backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56', '#888']
            }]
        }
    });

    new Chart(document.getElementById('lineChart'), {
        type: 'line',
        data: {
            labels: ['Jan', 'Feb', 'Mar', 'Apr'],
            datasets: [{
                label: 'Cumulative Balance',
                data: [15000, 27000, 45000, 63000],
                borderColor: '#4B0082',
                fill: true,
                backgroundColor: 'rgba(75, 0, 130, 0.1)',
                tension: 0.3
            }]
        }
    });
    </script>



</body>
</html>
